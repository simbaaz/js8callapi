# js8callapi
Unofficial reference for js8call API

## Формат

Для обмена сообщениями с приложением js8call используется следующая структура JSON:
```
{
    'type': ИМЯ СОБЫТИЯ ИЛИ КОМАНДЫ,
    'value': ЗНАЧЕНИЕ,
    'params': ОДИН ИЛИ НЕСКОЛЬКО ПАРАМЕТРОВ
}
```
Виды сообщений:
 - События: формируются приложением js8call.
 - Команды: посылаются в js8call извне. На большинство команд приложение js8call формирует ответ.

## События

**PING** - служебное событие, которое формируется каждые 15 секунд
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id события|
|NAME|JS8Call|
|VERSION|2.2.0|
|UTC|метка времени|

---
**RIG.FREQ** - формируется при смене диапазона
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id события|
|BAND|Идентификатор частотного диапазона|
|FREQ|Частота несущей+смещение канала, Гц|
|DIAL|Частота несущей, Гц|
|OFFSET|Смещение канала, Гц|

---
**LOG.QSO** - *описание пока не готово*
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id события|

---
**RX.ACTIVITY** - *описание пока не готово*
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id события|

---
**RX.DIRECTED** - формируется при получении любого адресного сообщения
|значение|ТЕКСТ ПРИНЯТОГО СООБЩЕНИЯ|
| ----------- | ----------- |

|параметр|комментарий|
| ----------- | ----------- |
|_ID|id события|
|FROM|Позывной отправителя|
|TO|Позывной получателя|
|CMD|*описание пока не готово*|
|GRID|QTH-локатор|
|EXTRA|*описание пока не готово*|
|TEXT|Текст принятого сообщения|
|FREQ|Частота несущей+смещение канала, Гц|
|DIAL|Частота несущей, Гц|
|OFFSET|Смещение канала, Гц|
|SNR|Отношение сигнал/шум|
|SPEED|Скорость, на которой получено сообщение, 0 - Normal, 1 - Fast, 2 - Turbo, 4 - Slow, 8 - Ultra|
|TDRIFT|Разница во времени, в секундах|
|UTC|Метка времени|

---
**RX.DIRECTED.ME** - формируется при получении сообщения, адресованного данному узлу или группе, в которой состоит узел
|значение|ТЕКСТ ПРИНЯТОГО СООБЩЕНИЯ|
| ----------- | ----------- |

|параметр|комментарий|
| ----------- | ----------- |
|_ID|id события|
|FROM|Позывной отправителя|
|TO|Позывной получателя|
|CMD|*описание пока не готово*|
|GRID|QTH-локатор|
|EXTRA|*описание пока не готово*|
|TEXT|Текст принятого сообщения|
|FREQ|Частота несущей+смещение канала, Гц|
|DIAL|Частота несущей, Гц|
|OFFSET|Смещение канала, Гц|
|SNR|Отношение сигнал/шум|
|SPEED|Скорость, на которой получено сообщение, 0 - Normal, 1 - Fast, 2 - Turbo, 4 - Slow, 8 - Ultra|
|TDRIFT|Разница во времени, в секундах|
|UTC|Метка времени|

---
**RX.SPOT** - формируется при получении QTH-локатора от узла и включенной опции отправки рапортов в Интернет
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id события|
|FREQ|Частота несущей+смещение канала, Гц|
|DIAL|Частота несущей, Гц|
|OFFSET|Смещение канала, Гц|
|CALL|Позывной узла|
|SNR|Отношение сигнал/шум|
|GRID|QTH-локатор узла|

---
**RIG.PTT** - формируется при включении/выключении режима передачи
|значение|индикатор режима передачи, 'on' / 'off'|
| ----------- | ----------- |

|параметр|комментарий|
| ----------- | ----------- |
|_ID|id события|
|PTT|индикатор режима передачи, true/false|
|UTC|метка времени|

---
**TX.FRAME** - *описание пока не готово*
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id события|

---
**STATION.STATUS** - формируется при смене текущих настроек приложения
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id события|
|FREQ|Частота несущей+смещение канала, Гц|
|DIAL|Частота несущей, Гц|
|OFFSET|Смещение канала, Гц|
|SPEED|Скорость передачи, 0 - Normal, 1 - Fast, 2 - Turbo, 4 - Slow, 8 - Ultra|
|SELECTED|Позывной выбранного узла|

---
**CLOSE** - формируется при закрытии приложения
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id события|

## Команды

**RIG.GET_FREQ** - запрос значения текущей частоты
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

**RIG.FREQ** - ответ на команду **RIG.GET_FREQ**
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|
|FREQ|частота несущей+смещение канала, Гц|
|DIAL|частота несущей, Гц|
|OFFSET|смещение канала, Гц|

---
**RIG.SET_FREQ** - запрос на смену текущей частоты
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|
| DIAL | частота несущей, Гц *|
| OFFSET | смещение канала, Гц *|

---
**STATION.GET_CALLSIGN** - запрос текущего позывного
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

**STATION.CALLSIGN** - ответ на команду **STATION.GET_CALLSIGN**
|значение|ПОЗЫВНОЙ|
| ----------- | ----------- |

|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

---
**STATION.GET_GRID** - запрос на получение текущего QTH-локатора
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

**STATION.GRID** - ответ на команду **STATION.GET_GRID** 
|значение|ЛОКАТОР УЗЛА|
| ----------- | ----------- |

|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

---
**STATION.SET_GRID** - запрос на изменение текущего QTH-локатора
|значение|ЛОКАТОР УЗЛА|
| ----------- | ----------- |

|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

**STATION.GRID** - ответ на команду **STATION.SET_GRID**
|значение|ЛОКАТОР УЗЛА|
| ----------- | ----------- |

|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

---
**STATION.GET_INFO** - запрос на получение текущей строки Station Information (INFO)
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

**STATION.INFO** - ответ на команду **STATION.GET_INFO**
|значение|СТРОКА INFO|
| ----------- | ----------- |

|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

---
**STATION.SET_INFO** - запрос на изменение текущей строки Station Information (INFO)
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

**STATION.INFO** - ответ на команду **STATION.SET_INFO**
|значение|СТРОКА INFO|
| ----------- | ----------- |

|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

---
**STATION.GET_STATUS** - запрос на получение текущей строки Station Status (STATUS)
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

**STATION.STATUS** - ответ на команду **STATION.GET_STATUS**
|значение|СТРОКА STATUS|
| ----------- | ----------- |

|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

---
**STATION.SET_STATUS** - запрос на изменение текущей строки Station Status (STATUS)
|значение|СТРОКА STATUS|
| ----------- | ----------- |

|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

**STATION.STATUS** - ответ на команду **STATION.SET_STATUS**
|значение|СТРОКА STATUS|
| ----------- | ----------- |

|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

---
**RX.GET_CALL_ACTIVITY** - *описание пока не готово*
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

**RX.CALL_ACTIVITY** - ответ на команду **RX.GET_CALL_ACTIVITY**
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

---
**RX.GET_CALL_SELECTED** - запрос на получение позывного выбранного узла 
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

**RX.CALL_SELECTED** - ответ на команду **RX.GET_CALL_SELECTED**
|значение|ПОЗЫВНОЙ УЗЛА|
| ----------- | ----------- |

|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

---
**RX.GET_BAND_ACTIVITY** - *описание пока не готово*
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

**RX.BAND_ACTIVITY** - ответ на команду **RX.GET_BAND_ACTIVITY**
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

---
**RX.GET_TEXT** - запрос на получение текста из окна принятой информации
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

**RX.TEXT** - ответ на команду **RX.GET_TEXT**
|значение|ТЕКСТ|
| ----------- | ----------- |

|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

---
**TX.GET_TEXT** - запрос на получение текста, готового к передаче
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

**TX.TEXT** - ответ на команду **TX.GET_TEXT**
|значение|ТЕКСТ|
| ----------- | ----------- |

|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

---
**TX.SET_TEXT** - запрос на заполнение поля текста, готового к передаче в ручном режиме
|значение|ТЕКСТ|
| ----------- | ----------- |

|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

**TX.TEXT** - ответ на команду **TX.SET_TEXT**
|значение|ТЕКСТ|
| ----------- | ----------- |

|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

---
**TX.SEND_MESSAGE** - запрос на автоматическую отправку текстового сообщения
|значение|ТЕКСТ СООБЩЕНИЯ|
| ----------- | ----------- |

|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

---
**MODE.GET_SPEED** - запрос текущего значения скорости передачи
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

**MODE.SPEED** - ответ на команду **MODE.GET_SPEED**
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|
|SPEED|Скорость передачи, 0 - Normal, 1 - Fast, 2 - Turbo, 4 - Slow, 8 - Ultra|

---
**MODE.SET_SPEED** - запрос на смену скорости передачи
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|
|SPEED|Скорость передачи, 0 - Normal, 1 - Fast, 2 - Turbo, 4 - Slow, 8 - Ultra|

**MODE.SPEED** - ответ на команду **MODE.SET_SPEED**
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|
|SPEED|Скорость передачи, 0 - Normal, 1 - Fast, 2 - Turbo, 4 - Slow, 8 - Ultra|

---
**INBOX.GET_MESSAGES** - *описание пока не готово*
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

**INBOX.MESSAGES** - ответ на команду **INBOX.GET_MESSAGES**
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|

---
**INBOX.STORE_MESSAGE** - запрос на локальное сохранение сообщения для определенного адресата
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|
|CALLSIGN|позывной адресата|
|TEXT|текст сообщения|

**INBOX.MESSAGE** - ответ на команду **INBOX.STORE_MESSAGE**
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|
|ID|id сохраненного сообщения|

---
**WINDOW.RAISE** - запрос на перемещение окна приложения на передний план
|параметр|комментарий|
| ----------- | ----------- |
|_ID|id запроса|
